{% extends 'base.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'orders/checkout.css' %}" />

<section class="py-5">
  <div class="container">
    <h2 class="mb-4">Checkout</h2>

    <!-- Order Form -->
    <form method="post" action="{% url 'checkout' %}">
      {% csrf_token %} {{ form.as_p }}

      <!-- Order Summary -->
      <div class="mt-4">
        <h5>Order Summary</h5>
        <ul class="list-group mb-3">
          {% for item in items %}
          <li class="list-group-item d-flex justify-content-between lh-sm">
            <div>
              <h6 class="my-0">{{ item.product.name }}</h6>
              <small class="text-muted">Qty: {{ item.quantity }}</small>
            </div>
            <span class="text-muted">Ksh {{ item.get_subtotal }}</span>
          </li>
          {% endfor %}

          <li class="list-group-item d-flex justify-content-between">
            <strong>Subtotal</strong>
            <strong>Ksh {{ subtotal }}</strong>
          </li>

          {% if delivery_fee %}
          <li class="list-group-item d-flex justify-content-between">
            <strong>Delivery Fee</strong>
            <strong>Ksh {{ delivery_fee }}</strong>
          </li>
          {% endif %}

          <li class="list-group-item d-flex justify-content-between">
            <strong>Total</strong>
            <strong>Ksh {{ subtotal|add:delivery_fee }}</strong>
          </li>
        </ul>

        {% if delivery_message %}
        <div class="alert alert-info">
          <strong>Delivery Location:</strong> {{ delivery_message }}
        </div>
        {% endif %}
      </div>

      <!-- Submit Button -->
      <div class="d-flex justify-content-end mt-4">
        <button type="submit" class="btn btn-success px-4 py-2">
          Place Order
        </button>
      </div>
    </form>
  </div>
</section>
{% endblock %}
